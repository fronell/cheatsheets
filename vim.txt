# General  
:h - Bring up help    

# Misc
:set ff=unix - Set format to unix, best method for removing ^M line endings
,m           - Old way of removing ^M line endings for dos files
:pwd         - Show current working directory
:sp <file>   - Open <file> in a horizontal split
:vsp <file>  - Open <file> in a vertical split

# Visual Selection
<from_line>GV<to_line>G - Visually select range
<from_line>GV<count>j   - Visually select <count> lines down (j) <from_line>

# Visually select Ruby text objects
vir - Select inner-portion of ruby block
var - Select entire ruby block
vim - Select contents within current ruby method
vam - Select contents around current ruby method
viM - Select content within current ruby class
vaM - Select content around current ruby class

# Search and Replace
:,$s/BEFORE/AFTER/  - Replace from current line to end of file
:,%s:BEFORE:AFTER:  - Colon delimiter (can use any non-regex metacharacter)
:%s/\vBEFORE/AFTER/ - Very magic mode so metacharacters like [] () don't need escaping

# Tabular
n,mTab /\A= - Align on the 1st = in the string (useful if there are multiple =)

# Motions  
%	- Move to corresponding bracket    
(	- Move cursor to the beginning of current sentence    
) - Move cursor to beginning of next sentence    
  
# Searching  
ggn	   - Jump to first search results  
GN     - Jump to last search result  
CTRL-O - Go back to where you came from  
CTRL-I - Goes forward  
  
# Insert Commands  
a - Append after cursor  
A - Append after line  
x - Delete character at cursor  
r - Replace character at cursor  
R - Replace character at cursor onward  
o - Opens line below cursor and starts in insert mode  
O - Opens line above cursor and starts in insert mode  
I - Insert text at beginning of the line  
  
# Buffers  
:bn              - go to next buffer
:bp              - go to previous buffer
:bd              - delete a buffer (close a file)
:Bd              - delete a buffer without closing window using Bbye plugin
:N,Mbd           - Delete buffer range N-M
:bw              - Wipeout a buffer
:bufdo :Bdelete  - Close all open buffers but leave windows intact

# grep
:vim /<pattern>/ <file/path/*>       - grep for pattern in file/path
:vim /<pattern>/ <file/path/**>      - grep for pattern in all files recursively
:vim /<pattern>/ <file/path/**/*.rb> - grep for pattern in .rb files recursively

# Indentation
>>   - Indent line by shiftwidth spaces
<<   - De-indent line by shiftwidth spaces
5>>  - Indent 5 lines
5==  - Re-indent 5 lines

>%   - Increase indent of a braced or bracketed block (place cursor on brace first)
=%   - Reindent a braced or bracketed block (cursor on brace)
<%   - Decrease indent of a braced or bracketed block (cursor on brace)
]p   - Paste text, aligning indentation with surroundings

=i{  - Re-indent the 'inner block', i.e. the contents of the block
=a{  - Re-indent 'a block', i.e. block and containing braces
=2a{ - Re-indent '2 blocks', i.e. this block and containing block

>i{  - Increase inner block indent
<i{  - Decrease inner block indent

  
# Folding  
zi        - open/close all folds  
zm        - Increases the foldlevel by one.  
zr        - Decreases the foldlevel by one.  
zfa}      - Fold block delimited by {}, works with (), [], <> also
za        - toggle current fold open/closed  
zc        - close current fold  
zM        - close all folds  
zv        - expands folds to reveal cursor  
zf#j      - Creates a fold from the cursor down  #  lines.  
zf/string - Creates a fold from the cursor to string .  
zj        - Moves the cursor to the next fold.  
zk        - Moves the cursor to the previous fold.  
zo        - Opens a fold at the cursor.  
zO        - Opens all folds at the cursor.  
zR        - Decreases the foldlevel to zero -- all folds will be open.  
zd        - Deletes the fold at the cursor.  
zE        - Deletes all folds.  
[z        - Move to start of open fold.  
]z        - Move to end of open fold.  
  
# Windows  
C-w s       - Show buffer in horizontally split windows  
C-w v       - Show buffer in vertically split windows  
C-w n       - Creates a new window in horizontal split with an empty buffer  
C-w nv      - Creates a new window in vertical split with an empty buffer  
:enew       - Creates a new window with an empty buffer and switches to it  
C-w q       - Close current window  
:q          - Close current window  
C-w o       - Close all windows but current  
C-h,j,k,l   - Nagivate through windows  
C-w r       - Rotate windows downwards/rightwards  
C-w R       - Rotate windows upwards/leftwards  
C-w H,K,J,L - Move current window to key position  
C-w =       - Make windows equal in size  
C-w +       - Increase window height  
C-w -       - Decreate window height  
C-w >       - Increase window width  
C-w <       - Decrease window width  

# Tabs
gt - Move to next tab in normal mode
gT - Move to previous tab in normal mode
  
# Movement Commands  
C-e         - Scroll down one line at a time
C-y         - Scroll up one line at a time
ctrl-d      - Scroll down half a page  
ctrl-u      - Scroll up half a page  
ctrl-f      - Scroll forward one page  
ctrl-b      - Scroll back one page  
(           - Move to the beginning of current sentence  
)           - Move to the end of next sentence  
{           - Move to the beginning of current paragraph  
}           - Move to the beginning of next paragraph  
[[          - Move to the beginning of current section  
]]          - Move to the beginning of next section  
<line num>G - Move to <line num>
zz          - move current line to the middle of the screen
zt          - move current line to the top of the screen
zb          - move current line to the bottom of the screen
  
# Diffing Windows  
:windo diffthis - Diff open windows  
]c              - Goto next change
[c              - Goto previous change
:diffoff        - Turn off diff for current window
:diffoff!       - Turn off diff for all windows 
:diffupdate     - Do this if diff doesn't reflect changes in the buffer(s)
:do - Same as diffget (diffg) without range or buffer spec
:dp - Same as diffput (diffpu) without range or buffer spec
:[range]diffg [bufspec]   - Modify the current buffer to undo difference with another buffer
                            If no range is given, the diff at the cursor position or just 
                            above it is affected
:[range]diffput [bufspec] - Modify another buffer to undo difference with the current buffer
                            If no range is given, the diff at the cursor position or just 
                            above it is affected
  
# Shell Commands  
:r !date		    - Reads command into file  
:!<command>		  - Executes <command>  
:!<command> %	  - Executes <command> on file in opened buffer (must save changes to file)
:r <filename|!> - Pastes <filename|command> below cursor position  
  
# Tags  
:ta t     - jump to tag t  
:nta      - jump to nth newer tag in list  
^],^T     - jump to the tag under cursor, return from tag  
:ts t     - list matching tags and select one for jump  
:tj t     - jump to tag or select one if multiple matches  
:tags     - print tag list  
:npo,:n^T - jump back from, to nth older tag  
:tl       - jump to last matching tag  
^W},:pt t - preview tag under cursor, tag t  
^W]       - split window and show tag under cursor  
^Wz,:pc   - close tag preview window  

# Omnicompletion
CTRL-X CTRL-O - Autocomplete  
CTRL-N        - Next  
CTRL-P        - Previous  
CTRL-Y        - Accept  
  
# PLUGINS  
## fugitive
Gblame      - Opens a vertical split window with the blame info on the left
Gdiff       - Compare working copy of file with the last commit
Gsdiff      - Compare working copy of file with the last commit in split
Gvdiff      - Compare working copy of file with the last commit in vsplit
Gstatus     - Bring up status window showing stage and unstaged changes
              Press - to toggle moving files between staged and unstaged
Glog [-<n>] - Bring up git log in seperate buffer with revisions in quickfix list
              n represents the amount of previous revisions to load

## nerdcommenter
,ci         - Comment a line on/off (inverse commenting)
<count>,ci  - Comment count lines on/off
<visual>,ci - Comment lines in visual mode on/off

## vim-surround
cs'"  - Use surround plugin to replace surrounding ' with "s
ds'   - Delete ' delimiters
csw)  - Use motion w to wrap word in () with no spaces
ysiw{ - Wrap selected word in {} with space i.e. { word }
ysiw} - Wrap selected word in {} with no space i.e. {word}
yss)  - Wrap entire line in () with no space i.e (entire line of words)

## ctrl-p
### custom mappings
,pb - buffer mode
,pm - mru mode
,pt - tag mode
,pf - file mode
,pp - mixed mode (everything)
  
### commands
Press <F5> to purge/refresh the cache for the current directory to get new files, remove deleted files and apply new ignore options.  
Press <c-f> and <c-b> to cycle between modes.  
Press <c-d> to switch to filename only search instead of full path.  
Press <c-r> to switch to regexp mode.  
Use <c-j>, <c-k> or the arrow keys to navigate the result list.  
Use <c-t> or <c-v>, <c-x> to open the selected entry in a new tab or in a new split.  
Use <c-n>, <c-p> to select the next/previous string in the prompt's history.  
Use <c-y> to create a new file and its parent directories.  
Use <c-z> to mark/unmark multiple files and <c-o> to open them.  
Run :help ctrlp-mappings or submit ? in CtrlP for more mapping help.  
  
Submit two or more dots .. to go up the directory tree by one or multiple levels.  
End the input string with a colon : followed by a command to execute it on the opening file(s):  
Use :diffthis when opening multiple files to run :diffthis on the first 4 files.  

### help
:help ctrlp-commands   - Help on commands
:help ctrlp-extensions - Help on extensions

## NERDtree
o.......Open files, directories and bookmarks....................|NERDTree-o|
go......Open selected file, but leave cursor in the NERDTree.....|NERDTree-go|
t.......Open selected node/bookmark in a new tab.................|NERDTree-t|
T.......Same as 't' but keep the focus on the current tab........|NERDTree-T|
i.......Open selected file in a split window.....................|NERDTree-i|
gi......Same as i, but leave the cursor on the NERDTree..........|NERDTree-gi|
s.......Open selected file in a new vsplit.......................|NERDTree-s|
gs......Same as s, but leave the cursor on the NERDTree..........|NERDTree-gs|
O.......Recursively open the selected directory..................|NERDTree-O|
x.......Close the current nodes parent...........................|NERDTree-x|
X.......Recursively close all children of the current node.......|NERDTree-X|
e.......Edit the current dir.....................................|NERDTree-e|
D.......Delete the current bookmark .............................|NERDTree-D|
P.......Jump to the root node....................................|NERDTree-P|
p.......Jump to current nodes parent.............................|NERDTree-p|
K.......Jump up inside directories at the current tree depth.....|NERDTree-K|
J.......Jump down inside directories at the current tree depth...|NERDTree-J|
<C-J>...Jump down to the next sibling of the current directory...|NERDTree-C-J|
<C-K>...Jump up to the previous sibling of the current directory.|NERDTree-C-K|
C.......Change the tree root to the selected dir.................|NERDTree-C|
u.......Move the tree root up one directory......................|NERDTree-u|
U.......Same as 'u' except the old root node is left open........|NERDTree-U|
r.......Recursively refresh the current directory................|NERDTree-r|
R.......Recursively refresh the current root.....................|NERDTree-R|
m.......Display the NERD tree menu...............................|NERDTree-m|
cd......Change the CWD to the dir of the selected node...........|NERDTree-cd|
CD......Change tree root to the CWD..............................|NERDTree-CD|
I.......Toggle whether hidden files displayed....................|NERDTree-I|
f.......Toggle whether the file filters are used.................|NERDTree-f|
F.......Toggle whether files are displayed.......................|NERDTree-F|
B.......Toggle whether the bookmark table is displayed...........|NERDTree-B|
q.......Close the NERDTree window................................|NERDTree-q|
A.......Zoom (maximize/minimize) the NERDTree window.............|NERDTree-A|
?.......Toggle the display of the quick help.....................|NERDTree-?|

# How-To's
## Diffing a file from a previous commit in git
>Open the file you want to diff
>:Gitv! to bring up the commit browser for the file
>Press D on the commit to diff against
### Commands to open commit but stay in buffer window
>o - Open in new split
>O - Open in new tab
>s - Open in new vsplit
